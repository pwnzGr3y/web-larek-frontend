# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TypeScript, Webpack

## Архитектура приложения

Приложение построено по модульной архитектуре с четким разделением ответственности между слоями.

### Структура проекта

```
src/
├── app/                    # Основной слой приложения
│   ├── App.ts            # Главный класс приложения
│   └── api/              # API клиенты для работы с бэкендом
│       ├── BaseClient.ts # Базовый HTTP клиент
│       ├── OrderClient.ts # Клиент для работы с заказами
│       └── ProductClient.ts # Клиент для работы с товарами
├── components/            # UI компоненты
│   ├── Basket.ts         # Компонент корзины
│   ├── Gallery.ts        # Галерея товаров
│   ├── ModalManager.ts   # Менеджер модальных окон
│   ├── OrderForm.ts      # Форма заказа
│   ├── ProductCard.ts    # Карточка товара
│   └── ProductPreview.ts # Предварительный просмотр товара
├── shared/               # Общие ресурсы
│   ├── types/           # TypeScript типы и интерфейсы
│   └── utils/           # Утилиты и константы
├── assets/              # Статические ресурсы (стили, шрифты, изображения)
└── index.ts             # Точка входа приложения
```

### Архитектурные слои

#### 1. Слой представления (Presentation Layer)
- **Компоненты** (`src/components/`) - переиспользуемые UI компоненты
- **Стили** (`src/assets/styles/`) - SCSS модули с переменными и миксинами
- **HTML** (`src/pages/`) - разметка страниц

#### 2. Слой бизнес-логики (Business Logic Layer)
- **App.ts** - главный класс, координирующий работу всех компонентов
- **ModalManager** - управление модальными окнами
- **Basket** - логика работы с корзиной

#### 3. Слой данных (Data Layer)
- **API клиенты** (`src/app/api/`) - абстракция для работы с REST API
- **BaseClient** - базовый HTTP клиент с обработкой ошибок
- **ProductClient** - специализированный клиент для товаров
- **OrderClient** - специализированный клиент для заказов

#### 4. Слой типизации (Type Layer)
- **Интерфейсы** (`src/shared/types/`) - TypeScript типы для API, заказов, товаров
- **Валидация** (`src/shared/utils/validation.ts`) - проверка данных

#### 5. Слой утилит (Utilities Layer)
- **Форматирование** (`src/shared/utils/formatUtils.ts`) - форматирование цен, дат
- **Валидация** (`src/shared/utils/validation.ts`) - проверка email, телефона, адреса
- **Маски** (`src/shared/utils/phoneMask.ts`) - маски для ввода данных
- **Изображения** (`src/shared/utils/imageUtils.ts`) - работа с изображениями товаров
- **Константы** (`src/shared/utils/constants.ts`) - API URL, CDN URL, HTTP методы

### Основные компоненты

#### App.ts
Центральный класс приложения, который:
- Инициализирует все компоненты
- Управляет жизненным циклом приложения
- Координирует взаимодействие между компонентами
- Обрабатывает события пользователя

#### ModalManager
Система управления модальными окнами:
- Открытие/закрытие модальных окон
- Управление стеком модальных окон
- Автоматическое закрытие при навигации

#### Basket
Логика корзины покупок:
- Добавление/удаление товаров
- Расчет общей стоимости
- Валидация товаров перед заказом
- Очистка корзины

#### Gallery
Компонент галереи товаров:
- Отображение списка товаров в виде карточек
- Анимация появления карточек с задержкой
- Обработка кликов по товарам
- Интеграция с ProductCard для рендеринга

#### ProductCard
Карточка отдельного товара:
- Отображение информации о товаре (название, цена, категория)
- Автоматическое форматирование цены
- Категоризация товаров с цветовой индикацией
- Обработка изображений товаров
- Интерактивность (клики, hover эффекты)

#### ProductPreview
Модальное окно предварительного просмотра товара:
- Детальная информация о товаре
- Кнопки добавления/удаления из корзины
- Интеграция с корзиной и модальными окнами
- Валидация доступности товара

#### OrderForm
Форма оформления заказа:
- Выбор способа оплаты (онлайн/наличные)
- Ввод адреса доставки
- Валидация полей в реальном времени
- Обработка ошибок валидации
- Интеграция с системой заказов

#### ContactsForm
Форма контактных данных:
- Ввод email и телефона
- Маска для телефонного номера
- Валидация email и телефона
- Форматирование данных для отправки
- Обработка ошибок валидации

#### OrderSuccess
Окно успешного оформления заказа:
- Отображение суммы заказа
- Кнопка закрытия
- Интеграция с модальной системой

### Взаимодействие компонентов

#### Поток работы пользователя
1. **Gallery** отображает список товаров через **ProductCard**
2. При клике на товар открывается **ProductPreview** через **ModalManager**
3. В **ProductPreview** пользователь может добавить товар в **Basket**
4. При переходе к оформлению заказа открывается **OrderForm**
5. После заполнения заказа открывается **ContactsForm**
6. При успешном заказе отображается **OrderSuccess**

#### Система событий
- **onSelectProduct** - связывает Gallery с ProductPreview
- **onCheckout** - связывает Basket с OrderForm
- **onClose** - управление закрытием модальных окон
- **onSubmit** - передача данных между формами

#### Управление состоянием
- **Basket** хранит состояние корзины
- **ModalManager** управляет стеком модальных окон
- **App** координирует общее состояние приложения

### API архитектура

#### BaseClient
Базовый HTTP клиент с:
- Автоматической обработкой ошибок
- Настройкой заголовков
- Логированием запросов
- Типизированными ответами

#### Специализированные клиенты
- **ProductClient** - операции с товарами (получение списка, деталей)
- **OrderClient** - создание и управление заказами

### Система стилей

- **SCSS модули** с переменными и миксинами
- **PostCSS** для автопрефиксов
- **Webpack** для сборки и оптимизации CSS
- **Responsive дизайн** с мобильной адаптацией

### Сборка и развертывание

- **Webpack 5** для сборки
- **TypeScript** компиляция
- **SCSS** препроцессор
- **Hot reload** для разработки
- **Production оптимизация** (минификация, tree shaking)

### Особенности реализации

#### Шаблонизация
- Использование HTML `<template>` элементов для компонентов
- Клонирование шаблонов для создания экземпляров
- Динамическое обновление содержимого

#### Обработка ошибок
- Try-catch блоки для API запросов
- Валидация данных на клиенте
- Graceful fallback при ошибках

#### Анимации и UX
- Плавное появление карточек товаров
- Переходы между модальными окнами
- Визуальная обратная связь для действий пользователя

#### Адаптивность
- Responsive дизайн для мобильных устройств
- Адаптивные изображения товаров
- Мобильная оптимизация форм

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```bash
npm install
npm run start
```

или

```bash
yarn
yarn start
```

## Сборка

```bash
npm run build
```

или

```bash
yarn build
```

## Доступные команды

- `npm run start` - запуск dev сервера
- `npm run build` - сборка для продакшена
- `npm run lint` - проверка кода ESLint
- `npm run format` - форматирование кода Prettier
- `npm run deploy` - деплой на GitHub Pages



